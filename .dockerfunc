_composer() {
  docker run \
  --rm \
  -u $(id -u):$(id -g) \
  -v $(pwd):/app \
  composer/composer \
  $@
}
_yarn() {
  docker run \
  --rm \
  -u "node" \
  -w "/home/node/app" \
  -v "$(pwd):/home/node/app" \
  node yarn \
  $@
}
_node() {
  docker run \
  --rm \
  -u "node" \
  -w "/home/node/app" \
  -v "$(pwd):/home/node/app" \
  node node \
  $@
}

_npm() {
  docker run \
  --rm \
  -u "node" \
  -w "/home/node/app" \
  -v "$(pwd):/home/node/app" \
  node npm \
  $@
}

swp_test() {
  local sitename="${1:-worpress_multisite}"
  echo $sitename
}


wordpress_multisite() {
  # setup wordpress multisite
  #mysql
  #phpadmin
  local sitename="${1:-wordpress_multisite}"
  echo "Creating docker contaner: ${sitename}"
  docker run \
  --name ${sitename} \
  -v ${HOME}/Development/wordpress/${sitename}/wp-content:/var/www/html/wp-content \
  -e WORDPRESS_DB_HOST="mysql57:3306" \
  -e WORDPRESS_DB_PASSWORD="r@nD0m7772" \
  -e WORDPRESS_MULTISITE="true" \
  -e WORDPRESS_DB_NAME="${sitename}" \
  -e WORDPRESS_DEBUG="true" \
  -e WP_GROUP=$(id -g) \
  -e VIRTUAL_HOST="wordpress.test" \
  --link mysql57:mysql \
  --restart=unless-stopped \
  -u :$(id -g) \
  -d \
  sturple/wordpress
}

mysql() {
  docker run \
  --name mysql57 \
  -v ${HOME}/appdata/.mysql:/var/lib/mysql \
  -e MYSQL_ROOT_PASSWORD="r@nD0m7772" \
  --restart always \
  -d \
  mysql:5.7 \
  $@
}

phpmyadmin() {
  docker run \
  --name phpmyadmin \
  -e MYSQL_ROOT_PASSWORD="r@nD0m7772" \
  -e PMA_HOST="mysql57" \
  -e VIRTUAL_HOST="phpmyadmin.test \
  --link mysql57:mysql \
  --restart always \
  -d \
  phpmyadmin/phpmyadmin \
  $@
}

rev_proxy() {
  local port = ${1:-80}
  docker run \
  --name rev_proxy \
  -d \
  -p $port:80 \
  -v /var/run/docker.sock:/tmp/docker.sock:ro  \
  -e DEFAULT_HOST=local.test \
  -restart always \
  jwilder/nginx-proxy \
  $@
}

